# 스테이트 칼리지 한인교회 웹사이트 관리자 안내서

## 목차
1. [웹사이트 개요](#웹사이트-개요)
2. [관리자 로그인](#관리자-로그인)
3. [새가족 등록 관리](#새가족-등록-관리)
4. [교회 소식 관리](#교회-소식-관리)
5. [이메일 구독자 관리](#이메일-구독자-관리)
6. [컨텐츠 수정 방법](#컨텐츠-수정-방법)
7. [배포 및 업데이트](#배포-및-업데이트)
8. [자주 묻는 질문](#자주-묻는-질문)

---

## 웹사이트 개요

### 기술 스택
- **프론트엔드**: Next.js + TypeScript + Tailwind CSS
- **백엔드/데이터베이스**: Supabase PostgreSQL
- **인증**: Supabase Auth (Google OAuth)
- **배포**: Vercel (자동 배포)
- **소스 코드**: GitHub Repository

### 주요 기능
- 반응형 웹 디자인 (모바일/데스크톱 대응)
- 다국어 지원 (한국어/영어)
- 새가족 등록 시스템
- 교회 소식/공지사항 관리
- 이메일 뉴스레터 시스템
- 기도요청 게시판
- 설교 아카이브
- 교회 역사 및 안내

---

## 관리자 로그인

### 접속 방법
1. 웹사이트 주소: `https://korean-church-website.vercel.app`
2. 관리자 페이지: `https://korean-church-website.vercel.app/admin/login`

### 로그인 계정
- Google 계정을 통한 로그인 지원
- `admin_users` 테이블에 등록된 이메일만 접근 가능

### 관리자 대시보드
로그인 후 `/admin/dashboard`에서 다음 기능 이용 가능:
- 새가족 등록 현황 확인
- 교회 소식 작성/수정
- 이메일 구독자 관리
- 기도요청 관리
- 웹사이트 통계 확인

---

## 새가족 등록 관리

### 새가족 등록 데이터 위치
- **Supabase 테이블**: `new_family_registrations`
- **데이터 구조**:
  ```
  {
    id: UUID,
    korean_name: "한국 이름",
    english_name: "English Name",
    birth_date: "생년월일",
    baptism_date: "세례일 (선택)",
    gender: "성별",
    country: "국가",
    address_line1: "주소 1",
    address_line2: "주소 2 (선택)",
    city: "도시",
    state: "주/도",
    zip_code: "우편번호",
    email: "이메일 (선택)",
    phone: "전화번호",
    previous_church_position: "이전 교회 직분 (선택)",
    previous_church: "이전 교회 (선택)",
    introduction: "이전 교회 인도자 (선택)",
    family_info: "가족 정보 (선택)",
    status: "pending | contacted | visiting | registered | inactive",
    admin_notes: "관리자 메모",
    submitted_at: "등록일시"
  }
  ```

### 새가족 등록 확인 방법
1. Supabase Dashboard 접속: https://supabase.com/dashboard
2. 프로젝트 선택
3. Table Editor → `new_family_registrations` 테이블 확인
4. 또는 관리자 대시보드에서 최근 등록 목록 확인

### 새가족 상태 관리
| 상태 | 설명 |
|------|------|
| `pending` | 신규 등록 (미연락) |
| `contacted` | 연락 완료 |
| `visiting` | 방문 중 |
| `registered` | 등록 완료 |
| `inactive` | 비활성 |

### 새가족 연락 및 후속 조치
1. 등록된 연락처로 환영 인사
2. 첫 방문 시 특별 안내 및 환대
3. 소그룹 또는 새가족반 안내
4. 정기적인 안부 인사 및 교회 적응 도움

---

## 교회 소식 관리

### 공지사항 작성
1. 관리자 대시보드 → "새 게시물 작성"
2. 제목, 내용, 카테고리 선택
3. 게시 날짜 설정
4. 미리보기 후 발행

### 게시물 유형
- **announcement**: 공지사항
- **event**: 이벤트/행사
- **general**: 일반 게시글

### 게시물 상태
- **draft**: 임시저장 (비공개)
- **published**: 발행됨 (공개)
- **scheduled**: 예약발행

### 데이터 위치
- **Supabase 테이블**: `posts`
- 관리자 대시보드에서 CRUD 가능

---

## 이메일 구독자 관리

### 뉴스레터 발송
1. 관리자 대시보드 → "뉴스레터 발송"
2. 대상 공지사항 선택
3. 발송 미리보기 확인
4. 발송 버튼 클릭

### 구독자 관리
- **Supabase 테이블**: `email_subscribers`
- 활성/비활성 구독자 관리
- 구독 취소 요청 처리

### 구독자 데이터 구조
```
{
  id: UUID,
  email: "이메일 주소",
  subscribed_at: "구독 일시",
  is_active: true/false,
  unsubscribed_at: "구독 취소 일시 (선택)"
}
```

---

## 기도요청 관리

### 기도요청 데이터
- **Supabase 테이블**: `prayer_requests`
- **답글 테이블**: `prayer_replies`

### 기도요청 구조
```
{
  id: UUID,
  title: "제목",
  content: "내용",
  author: "작성자",
  author_email: "작성자 이메일",
  created_at: "작성일시"
}
```

---

## 컨텐츠 수정 방법

### 정적 컨텐츠 수정
페이지 내용 수정은 코드 저장소에서 직접 수정:

1. GitHub 저장소 접속
2. `src/pages/` 폴더에서 해당 페이지 파일 찾기
3. 내용 수정 후 커밋
4. Vercel이 자동으로 배포

### 번역 수정
1. `public/locales/ko/` - 한국어 번역
2. `public/locales/en/` - 영어 번역
3. JSON 파일 형식으로 관리

### 이미지 수정
1. `public/images/` 폴더에 이미지 업로드
2. 코드에서 이미지 경로 수정

---

## 배포 및 업데이트

### 자동 배포 (권장)
1. GitHub에 코드 푸시
2. Vercel이 자동으로 감지하여 빌드
3. 빌드 성공 시 자동 배포

### 수동 배포
1. Vercel 대시보드 접속
2. 프로젝트 선택
3. "Deployments" 탭에서 "Redeploy" 클릭

### 환경 변수 관리
Vercel 대시보드 → Settings → Environment Variables

필수 환경 변수:
```
NEXT_PUBLIC_SUPABASE_URL=https://your-project.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=eyJ...
SUPABASE_SERVICE_ROLE_KEY=eyJ... (서버사이드용)
```

---

## 자주 묻는 질문

### Q: 관리자 계정을 추가하려면?
**A**: Supabase Dashboard → Table Editor → `admin_users` 테이블에 이메일 추가

### Q: 게시물이 웹사이트에 안 보여요
**A**: 게시물 상태가 'published'인지 확인하세요.

### Q: 새가족 등록 알림을 받고 싶어요
**A**: 이메일 알림 기능이 구현되어 있습니다. 관리자 이메일 설정을 확인하세요.

### Q: 이미지 업로드가 안 돼요
**A**: 파일 크기 제한(5MB)을 확인하고, 지원 형식(jpg, png, gif)인지 확인하세요.

### Q: 웹사이트가 느려요
**A**: Vercel 대시보드에서 성능 지표를 확인하고, 이미지 최적화가 필요할 수 있습니다.

---

## 긴급 연락처

### 기술 지원
- **개발자**: [개발자 연락처]
- **이메일**: [기술지원 이메일]

### 문제 해결 순서
1. 이 문서의 FAQ 확인
2. 관리자 대시보드 상태 확인
3. Vercel 배포 상태 확인
4. 개발자에게 연락

---

## 보안 주의사항

### API 키 보호
- 환경 변수는 절대 코드에 직접 작성하지 않음
- `.env.local` 파일은 Git에 커밋하지 않음

### 관리자 권한
- 불필요한 관리자 계정은 비활성화
- 정기적으로 `admin_users` 테이블 검토
- 퇴임한 관리자 계정 즉시 제거

### 데이터 백업
- Supabase는 자동 백업 제공
- 중요 데이터는 정기적으로 수동 백업 권장

---

*마지막 업데이트: 2025-01-16*
